(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{405:function(t,e,n){var content=n(440);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(61).default)("24656963",content,!0,{sourceMap:!1})},439:function(t,e,n){"use strict";n(405)},440:function(t,e,n){var r=n(60)(!1);r.push([t.i,'.pax-bold[data-v-206c4388]{font-family:"bold",sans-serif}.pax-semibold[data-v-206c4388]{font-family:"semibold",sans-serif}.pax-regular[data-v-206c4388]{font-family:"regular",sans-serif}@media screen and (max-width:999px){div#background[data-v-206c4388]{width:100vw}}div#mapContainer[data-v-206c4388]{padding-bottom:70%!important;background:#00515c;width:100vw}div#mapContainer svg[data-v-206c4388]{width:90%;margin:0 auto}.subtitle[data-v-206c4388]{text-align:center;margin:-7px 0 7px;display:block;color:#fff;font-size:12pt}#controls[data-v-206c4388]{width:100vw;display:flex;justify-content:center}.buttonContainer[data-v-206c4388]{border:2px solid #003941;width:-webkit-max-content;width:-moz-max-content;width:max-content;margin:25px;border-radius:25px;flex-shrink:0}.buttonContainer button[data-v-206c4388]{background:transparent;box-shadow:none}.buttonContainer button[data-v-206c4388]:hover{background:#60aeb8;transform:none}.buttonContainer button.active[data-v-206c4388]{background:#00515c;color:#fff;border-radius:25px}',""]),t.exports=r},458:function(t,e,n){"use strict";n.r(e);var r=n(3),o=(n(24),n(17),n(37),{data:function(){return{map:null,loadedScripts:0,inView:!1,mapData:null,currentMetric:"count",currentScale:"count",totals:{count:0,playtime:0}}},beforeMount:function(){window.addEventListener("resize",this.resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.resizeHandler)},watch:{loadedScripts:function(t,e){3===t&&this.run()},currentMetric:function(t,e){for(var n in this.mapData)this.mapData[n].numberOfThings=this.mapData[n][t];this.reloadMap(),this.$refs["metric_".concat(e)].classList.remove("active"),this.$refs["metric_".concat(t)].classList.add("active")},currentScale:function(t,e){this.reloadMap(),this.$refs["scale_".concat(e)].classList.remove("active"),this.$refs["scale_".concat(t)].classList.add("active")}},methods:{getMapData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/api/worldmapdata");case 2:for(n in t.mapData=e.sent,t.totals)for(r in t.mapData)t.totals[n]+=t.mapData[r][n];case 4:case"end":return e.stop()}}),e)})))()},reloadMap:function(){this.map=null;for(var t=this.$refs.mapContainer;0!=t.children.length;)t.removeChild(t.children[0]);this.run()},updateColorCoding:function(){var t=0;for(var e in this.mapData)this.mapData[e].numberOfThings>t&&(t=this.mapData[e].numberOfThings);for(var n in this.mapData)this.mapData[n].numberOfThings>0&&(this.mapData[n].fillKey=100*(this.mapData[n].numberOfThings/t).toFixed(1)+"%")},run:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mapData){e.next=3;break}return e.next=3,t.getMapData();case 3:t.updateColorCoding(),t.$nextTick((function(){window.d3&&window.topojson?this.map=new Datamap({scope:"world",element:this.$refs.mapContainer,projection:"mercator",height:window.innerHeight,width:window.innerWidth,aspectRatio:1,responsive:!0,fills:{defaultFill:"#e9e9e9","0%":"#B4B4B4","10%":"#A3DFE8","20%":"#00acc4","30%":"#0099ae","40%":"#008395","50%":"#007787","60%":"#018799","80%":"#017a8a","70%":"#006c7b","90%":"#00616f","100%":"#00616f"},geographyConfig:{metric:this.currentMetric,scale:this.currentScale,total:this.totals[this.currentMetric],highlightOnHover:!1,popupTemplate:function(t,data){return"<div class='hoverinfo'>".concat(t.properties.name,": ").concat("count"==this.scale?data.numberOfThings:Math.round(data.numberOfThings/this.total*100)," ").concat("count"==this.scale?"count"==this.metric?"Member(s)":"hours":"%","</div>")}},data:this.mapData}):console.error("dependencies not loaded")}));case 5:case"end":return e.stop()}}),e)})))()},resizeHandler:function(){this.map.resize()},intersect:function(t){t[0].isIntersecting&&this.$nextTick((function(){this.inView=!0}))},setupOberserver:function(){this.$nextTick((function(){var t=new IntersectionObserver(this.intersect,{root:null,rootMargin:"500px",threshold:0});try{t.observe(this.$refs.memberWorldmapBackground)}catch(t){console.error("Cant setup intersection observer for member worldmap",t)}}))}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"complete"==document.readyState&&t.setupOberserver(),document.onreadystatechange=function(){"complete"==document.readyState&&t.setupOberserver()};case 2:case"end":return e.stop()}}),e)})))()}}),c=(n(439),n(36)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"memberWorldmapBackground",staticClass:"background-bright"},[n("div",{staticClass:"scrollTarget",attrs:{id:"section_memberWorldmap"}}),t._v(" "),t._m(0),t._v(" "),n("div",{attrs:{id:"controls"}},[n("div",{staticClass:"buttonContainer"},[n("button",{ref:"metric_count",staticClass:"active",on:{click:function(e){t.currentMetric="count"}}},[t._v("Members")]),t._v(" "),n("button",{ref:"metric_playtime",on:{click:function(e){t.currentMetric="playtime"}}},[t._v("Playtime")])]),t._v(" "),n("div",{staticClass:"buttonContainer"},[n("button",{ref:"scale_count",staticClass:"active",on:{click:function(e){t.currentScale="count"}}},[t._v("Total")]),t._v(" "),n("button",{ref:"scale_percent",on:{click:function(e){t.currentScale="percent"}}},[t._v("Percent")])])]),t._v(" "),n("client-only",[t.inView?n("div",[n("script",{attrs:{type:"application/javascript",src:"https://d3js.org/d3.v3.min.js",async:"false"},on:{load:function(e){t.loadedScripts+=1}}}),t._v(" "),n("script",{attrs:{type:"application/javascript",src:"https://d3js.org/topojson.v2.min.js",async:"false"},on:{load:function(e){t.loadedScripts+=1}}}),t._v(" "),n("script",{attrs:{type:"application/javascript",src:"/datamaps.js",async:"false"},on:{load:function(e){t.loadedScripts+=1}}})]):t._e(),t._v(" "),n("div",{attrs:{id:"map"}},[n("div",{ref:"mapContainer",attrs:{id:"mapContainer"}})])])],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[t._v("World map"),n("span",{staticClass:"subtitle"},[t._v("We are a global community")])])}],!1,null,"206c4388",null);e.default=component.exports}}]);